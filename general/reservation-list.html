<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>一般着付予約一覧</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Custom Script -->
  <script type="module" src="../assets/js/general/reservation-list.js"></script>
  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Styles -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/sanitize.css">
  <link rel="stylesheet" href="../assets/css/common/layout.css">
  <link rel="stylesheet" href="../assets/css/common/list-page.css">
</head>

<body x-data="app" x-init="init">
  <header class="header">
    <div class="header-inner">
      <div class="flex gap-2 items-baseline">
        <h1 class="header-title">
          <a href="../index.html">着付予約管理</a>
        </h1>
        <div class="text-gray-300 text-sm">お客様名クリックで顧客情報の編集ページに移動します</div>
      </div>
      <nav class="header-nav">
        <a href="./reservation-list.html" class="active">予約一覧</a>
        <a href="./index.html">顧客一覧</a>
        <a href="./customer-form.html">顧客登録</a>
      </nav>
    </div>
  </header>

  <main>
    <div x-show="isLoading" class="text-center text-gray-500 mt-10">
      <i class="fa-solid fa-spinner fa-spin mr-2"></i>
      読み込み中...
    </div>
    <table x-show="!isLoading">
      <thead class="bg-gray-100">
        <tr>
          <th>お客様名</th>
          <th>着付日</th>
          <th>所要時間</th>
          <th>着付場所</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="reserve in reservations" :key="reserve.id">
          <tr class="border-b">
            <td>
              <a :href="`./customer-form.html?customerId=${reserve.customerId}`" target="_blank" class="hover:text-blue-700">
                <span x-text="reserve.name"></span>
                <i class="fa-solid fa-arrow-up-right-from-square text-[14px] opacity-60"></i>
              </a>
            </td>
            <td x-text="formatDateOnly(reserve.date)"></td>
            <td>
              <span x-text="formatTime(reserve.startTime)"></span>
              <span x-show="reserve.endTime">～</span>
              <span x-text="formatTime(reserve.endTime)"></span>
            </td>
            <td x-text="reserve.locationLabel === '自宅' ? reserve.address : reserve.location"></td>
            <td>
              <a :href="`./reservation-form.html?reservationId=${reserve.id}`"
                target="_blank"
                class="inline-flex items-center gap-1 px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs transition">
                <i class="fa-solid fa-pen"></i> 予約編集
              </a>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </main>
</body>

</html>
