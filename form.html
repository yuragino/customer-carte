<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>æ¥åº—è€…ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
  <script type="module" src="/js/form.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    integrity="sha384-...." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./css/layout.css">
  <style>
    .form-area {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .form-info {
      display: flex;
      gap: 10px;
    }

    .form-title {
      width: 120px;
      height: 100%;
      padding: 3px;
      background-color: #f0f0f0;
    }

    .form-info .notes {
      display: inline-block;
      width: 500px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #f0f0f0;
    }

    input[type="file"] {
      width: 100%;
    }
  </style>
</head>

<body x-data="app" x-init="init">
  <header>
    <div class="header-inner">
      <h2 ã‚«ãƒ«ãƒ†></h2>
      <ul>
        <li>å½“æ—¥æ¥åº—é †</li>
        <li>ç”»åƒã§æ¢ã™</li>
        <li>ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </li>
      </ul>
    </div>
  </header>
  <main>
    <div class="content">
      <button><a href="/index.html">â† æˆ»ã‚‹</a></button>
      <h1>ğŸ“ æ¥åº—è€…ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </h1>

      <div class="form-area">
        <!-- ã˜ã‚ƒã‚‰ã‚“ -->
        <div class="form-info">
          <span class="form-title">ã˜ã‚ƒã‚‰ã‚“</span>
          <label>
            <input type="checkbox" x-model="formData.isJalan"> ã˜ã‚ƒã‚‰ã‚“äºˆç´„
          </label>
        </div>

        <!-- ä»£è¡¨è€…å -->
        <div class="form-info">
          <span class="form-title">ä»£è¡¨è€…å</span>
          <input type="text" x-model="formData.leaderName" @input="updateLeaderKana">
        </div>

        <!-- ãƒ•ãƒªã‚¬ãƒŠ -->
        <div class="form-info">
          <span class="form-title">ãƒ•ãƒªã‚¬ãƒŠ</span>
          <input type="text" x-model="formData.leaderKana">
        </div>

        <!-- äººæ•° -->
        <div class="form-info">
          <span class="form-title">äººæ•°</span>
          <label>å¥³ <input type="number" min="0" x-model.number="formData.femaleNum"
              @change="generatePeopleRows()"></label>
          <label>ç”· <input type="number" min="0" x-model.number="formData.maleNum"
              @change="generatePeopleRows()"></label>
        </div>

        <!-- æ¥åº—æ—¥æ™‚ -->
        <div class="form-info">
          <span class="form-title">æ¥åº—æ—¥æ™‚</span>
          <input type="date" x-model="formData.visitDate">
          <input type="time" x-model="formData.visitTime" min="09:00" max="18:00" step="900">
        </div>

        <!-- æ¥åº—æ–¹æ³• -->
        <div class="form-info">
          <span class="form-title">æ¥åº—æ–¹æ³•</span>
          <label><input type="radio" value="è»Š" x-model="formData.visitMethod"> è»Š</label>
          <label><input type="radio" value="JR" x-model="formData.visitMethod"> JR</label>
          <label><input type="radio" value="æ±æ­¦" x-model="formData.visitMethod"> æ±æ­¦</label>
        </div>

        <!-- ä½æ‰€ -->
        <div class="form-info">
          <span class="form-title">ä½æ‰€</span>
          <input type="text" x-model="formData.address">
        </div>

        <!-- é›»è©±ç•ªå· -->
        <div class="form-info">
          <span class="form-title">é›»è©±ç•ªå·</span>
          <input type="tel" x-model="formData.tel" placeholder="080-1234-5678">
        </div>

        <!-- LINE -->
        <div class="form-info">
          <span class="form-title">LINE</span>
          <label><input type="radio" value="æ•™å®¤LINE" x-model="formData.lineType"> æ•™å®¤LINE</label>
          <label><input type="radio" value="æ¤¿LINE" x-model="formData.lineType"> æ¤¿LINE</label>
          <label><input type="radio" value="ãŠå®¢æ§˜LINE" x-model="formData.lineType"> ãŠå®¢æ§˜LINE</label>
        </div>

        <!-- ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ -->
        <div class="form-info">
          <span class="form-title">ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼</span>
          <template x-for="year in RepeaterYears" :key="year">
            <label>
              <input type="checkbox" :value="year" x-model="formData.selectedRepeaterYears"> <span x-text="year"></span>
            </label>
          </template>
        </div>

        <!-- å‚™è€ƒ -->
        <div class="form-info">
          <span class="form-title">å‚™è€ƒ</span>
          <input type="text" x-model="formData.notes">
        </div>
      </div>

      <!-- å€‹äººæƒ…å ±å…¥åŠ›ãƒ†ãƒ¼ãƒ–ãƒ« -->
      <table>
        <thead>
          <tr>
            <th>é …ç›®</th>
            <template x-for="(person, index) in people" :key="index">
              <th x-text="(index + 1) + 'äººç›®'"></th>
            </template>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>åå‰</td>
            <template x-for="(person, index) in people" :key="index">
              <td><input type="text" x-model="person.name"></td>
            </template>
          </tr>
          <tr>
            <td>æ€§åˆ¥</td>
            <template x-for="(person, index) in people" :key="index">
              <td>
                <label><input type="radio" :name="'gender'+index" value="å¥³" x-model="person.gender"> å¥³</label>
                <label><input type="radio" :name="'gender'+index" value="ç”·" x-model="person.gender"> ç”·</label>
              </td>
            </template>
          </tr>
          <tr>
            <td>ç€ä»˜ã‘ç¨®åˆ¥</td>
            <template x-for="(person, index) in people" :key="index">
              <td>
                <label><input type="radio" :name="'type'+index" value="rentalKitsuke"
                    x-model="person.type">ãƒ¬ãƒ³ã‚¿ãƒ«&ç€ä»˜</label>
                <label><input type="radio" :name="'type'+index" value="kitsukeOnly"
                    x-model="person.type">ç€ä»˜ã®ã¿(æŒè¾¼)</label>
              </td>
            </template>
          </tr>
          <tr>
            <td>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</td>
            <template x-for="(person, index) in people" :key="index">
              <td>
                <label><input type="checkbox" value="geta" x-model="person.options">ä¸‹é§„</label>
                <label><input type="checkbox" value="bag" x-model="person.options">ã‹ã”ãƒãƒƒã‚°</label>
              </td>
            </template>
          </tr>
          <tr>
            <td>ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</td>
            <template x-for="(person, index) in people" :key="index">
              <td><input type="file" @change="handleFileUpload($event, index)"></td>
            </template>
          </tr>
          <tr>
            <td>åˆè¨ˆï¼ˆå††ï¼‰</td>
            <template x-for="(person, index) in people" :key="index">
              <td x-text="calcPersonKitsukeTotal(person)+calcPersonOptionTotal(person) "></td>
            </template>
          </tr>
        </tbody>
      </table>

      <!-- åˆè¨ˆ -->
      <template x-if="formData.isJalan">
        <div class="form-area">
          <div class="form-info">
            <span class="form-title">å‰æ‰•ã„åˆè¨ˆ</span>
            <strong x-text="calcGroupJalanPrepaid()"></strong>å††
          </div>
          <div class="form-info">
            <span class="form-title">ç¾åœ°æ”¯æ‰•åˆè¨ˆ</span>
            <strong x-text="calcGroupJalanOnSite()"></strong> å††
          </div>
        </div>
      </template>

      <h3>ã‚°ãƒ«ãƒ¼ãƒ—åˆè¨ˆ <span x-text="calcGroupTotal()"></span> å††</h3>

      <button @click="submitForm">ğŸ‘† ç™»éŒ²ã™ã‚‹</button>
  </main>
</body>

</html>

<!-- Cspell:ignore Jalan kitsuke geta -->